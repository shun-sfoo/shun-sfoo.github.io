<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>archlinux 手动挡 - shun-sfoo Tech blog</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../index.html">简介</a></li><li class="chapter-item affix "><li class="part-title">编程</li><li class="chapter-item "><a href="../basic/data-struct/intro.html">数据结构</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../basic/data-struct/array.html">数组</a></li><li class="chapter-item "><a href="../basic/data-struct/stackAndQueue.html">栈和队列</a></li><li class="chapter-item "><a href="../basic/data-struct/linkedList.html">链表</a></li><li class="chapter-item "><a href="../basic/data-struct/heap.html">堆</a></li><li class="chapter-item "><a href="../basic/data-struct/bst.html">二分搜索树</a></li><li class="chapter-item "><a href="../basic/data-struct/RBTree.html">红黑树</a></li><li class="chapter-item "><a href="../basic/data-struct/segmentTree.html">线段树</a></li><li class="chapter-item "><a href="../basic/data-struct/avl.html">avl 树</a></li><li class="chapter-item "><a href="../basic/data-struct/unionFind.html">并查集</a></li></ol></li><li class="chapter-item "><li class="part-title">操作系统</li><li class="chapter-item expanded "><a href="../linux/intro.html">linux</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../linux/arch.html">archlinux 简明安装教程</a></li><li class="chapter-item "><a href="../linux/GObject.html">GObject</a></li><li class="chapter-item "><a href="../linux/hyprland.html">hyprland 安装</a></li><li class="chapter-item "><a href="../linux/pci_passthrough_via_ovmf.html">显卡直通</a></li><li class="chapter-item "><a href="../linux/practical-vim.html">vim</a></li><li class="chapter-item "><a href="../linux/dbus.html">dbus</a></li><li class="chapter-item "><a href="../linux/zsh-01.html">zsh_1 variable</a></li><li class="chapter-item "><a href="../linux/openwrt.html">openwrt 作为旁路由</a></li><li class="chapter-item "><a href="../linux/gentoo.html">gentoo 安装简化流程</a></li><li class="chapter-item "><a href="../linux/haskell.html">haskell</a></li><li class="chapter-item expanded "><a href="../linux/arch_manual.html" class="active">archlinux 手动挡</a></li></ol></li><li class="chapter-item "><a href="../neovim/intro.html">neovim</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../neovim/package.html">package</a></li></ol></li><li class="chapter-item "><a href="../gentoo/intro.html">gentoo</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../gentoo/gentoo.html">安装</a></li><li class="chapter-item "><a href="../gentoo/portage.html">portage</a></li><li class="chapter-item "><a href="../gentoo/make-conf.html">make.conf</a></li><li class="chapter-item "><a href="../gentoo/fstab.html">fstab</a></li><li class="chapter-item "><a href="../gentoo/core.html">内核配置</a></li><li class="chapter-item "><a href="../gentoo/driver.html">驱动</a></li><li class="chapter-item "><a href="../gentoo/note.html">笔记</a></li></ol></li><li class="chapter-item "><a href="../Java/intro.html">Java</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Java/jvm01.html">jvm1</a></li><li class="chapter-item "><a href="../Java/jvm02.html">jvm2</a></li><li class="chapter-item "><a href="../Java/jvm03.html">jvm3</a></li></ol></li><li class="chapter-item "><a href="../macOS/intro.html">macOS</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../macOS/development.html">development</a></li></ol></li><li class="chapter-item "><a href="../reading/intro.html">阅读</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../reading/Critical-Thinking.html">「学会提问」</a></li></ol></li><li class="chapter-item "><a href="../Rust/intro.html">Rust</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Rust/toolchains.html">toolchains</a></li><li class="chapter-item "><a href="../Rust/base.html">base</a></li><li class="chapter-item "><a href="../Rust/concurrency.html">concurrency</a></li><li class="chapter-item "><a href="../Rust/lists.html">list</a></li><li class="chapter-item "><a href="../Rust/little-macro.html">little-macro</a></li><li class="chapter-item "><a href="../Rust/ownership.html">ownership</a></li><li class="chapter-item "><a href="../Rust/rust-web.html">rust-web</a></li><li class="chapter-item "><a href="../Rust/summary.html">summary</a></li></ol></li><li class="chapter-item "><a href="../chromium/intro.html">chromium</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../chromium/update_engine.html">update-engine</a></li></ol></li><li class="chapter-item "><a href="../profile/skill.html">简历</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">shun-sfoo Tech blog</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/shun-sfoo" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="archlinux-手动挡"><a class="header" href="#archlinux-手动挡">archlinux 手动挡</a></h1>
<h2 id="archlinux-installation-安装步骤"><a class="header" href="#archlinux-installation-安装步骤">archlinux installation 安装步骤</a></h2>
<h3 id="网络连接"><a class="header" href="#网络连接">网络连接</a></h3>
<p>无线连接 (optional)</p>
<pre><code class="language-bash">iwctl
device list
station *device* scan
station *device* get-networks
station *device* connect SSID
</code></pre>
<pre><code class="language-bash"># 旧设备无线连接
ip link set $device_name up
iwlist $device_name scan |grep ESSID
wpa_passphrase $net_ssid $password &gt; $net.config
wpa_supplicant -c $net.config -i $device_name
pacman -S wireless-tools wpa_supplicant
</code></pre>
<h3 id="在其他机器上远程连接安装"><a class="header" href="#在其他机器上远程连接安装">在其他机器上远程连接安装</a></h3>
<p>更新系统时间</p>
<p><code>timedatectl set-ntp true</code></p>
<p>通过 ssh 链接当前主机（可选）</p>
<pre><code class="language-bash">passwd
ip -brief address
ssh -o StrictHostKeyChecking=no root@&lt;刚刚查看的 IP 地址&gt;
</code></pre>
<h3 id="磁盘操作"><a class="header" href="#磁盘操作">磁盘操作</a></h3>
<p>磁盘分区</p>
<pre><code class="language-bash">cfdisk -z 磁盘
</code></pre>
<p>格式化</p>
<pre><code class="language-bash">mkfs.vfat /dev/sda1
mkswap /dev/sda2
swapon /dev/sda2
mkfs.ext4 /dev/sda3
# mkfs.ext4 /dev/sdb1
# mkfs.btrfs -f /dev/sda2
# if have another disk mkfs.btrfs -f /dev/sdb1
</code></pre>
<p>挂载</p>
<p><a href="https://wiki.archlinux.org/title/EFI_system_partition#Typical_mount_points">systemd-boot</a></p>
<pre><code class="language-bash">mount /dev/sda3 /mnt
mkdir -p /mnt/boot
# mkdir -p /mnt/home
mount /dev/sda1 /mnt/boot
# mount /dev/sdb1 /mnt/home
lsblk -f ## 查看分区情况
</code></pre>
<h3 id="安装系统"><a class="header" href="#安装系统">安装系统</a></h3>
<pre><code class="language-bash"># uncomment /etc/pacman.conf ParallelDownloads
reflector --country china &gt; /etc/pacman.d/mirrorlist
pacman -Sy
pacman -S archlinux-keyring
pacstrap /mnt linux linux-firmware linux-headers base
# btrfs-progs
</code></pre>
<p>生成文件系统的表文件</p>
<pre><code class="language-bash">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
cat /mnt/etc/fstab
</code></pre>
<p>进入新系统</p>
<pre><code class="language-bash">arch-chroot /mnt
passwd
alias vim=nvim
pacman -S sudo neovim
</code></pre>
<p>设置时区</p>
<pre><code class="language-bash">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
hwclock --systohc
</code></pre>
<h3 id="本地化"><a class="header" href="#本地化">本地化</a></h3>
<pre><code class="language-bash"># vim /etc/locale.gen

en_US.UTF-8 UTF-8
zh_CN.UTF-8 UTF-8
locale-gen

# vim /etc/locale.conf
LANG=en_US.UTF-8
</code></pre>
<h3 id="网络配置"><a class="header" href="#网络配置">网络配置</a></h3>
<pre><code class="language-bash"># vim /etc/hostname
arch
</code></pre>
<p>生成对应的 hosts</p>
<pre><code class="language-bash"># vim /etc/hosts
127.0.0.1 localhost
::1 localhost
127.0.1.1 arch.localdomain arch
# 140.82.114.4 github.com
</code></pre>
<h3 id="引导管理"><a class="header" href="#引导管理">引导管理</a></h3>
<p>systemd-boot</p>
<pre><code class="language-bash">bootctl install
systemctl enable systemd-boot-update.service
pacman -S intel-ucode
</code></pre>
<p>configuration loader.conf</p>
<p><a href="https://wiki.archlinux.org/title/Systemd-boot#Configuration">systemd-boot configuration</a></p>
<pre><code class="language-bash">vim /boot/loader/loader.conf
#timeout 3
default 	arch.conf
console-mode 	max
editor 		no
</code></pre>
<p>configuration entries</p>
<pre><code class="language-bash">vim /boot/loader/entries/arch.conf
title	Arch Linux
linux	/vmlinuz-linux
initrd	/intel-ucode.img
initrd	/initramfs-linux.img
options	root=/dev/sda3 rw
# enable nvidia-drm
# options	root=/dev/sda3 rw nvidia-drm.modeset=1
# if occur [i915 drm error] add `i915.modeset=0 nouveau.modeset=0`
</code></pre>
<p>有线连接</p>
<p><code>ip link set $device up</code></p>
<p>使用 system-networkd 配置网络</p>
<pre><code class="language-bash">vim /etc/systemd/network/20-wired.network
[Match]
Name=enp3s0

# dhcp 设置
[Network]
DHCP=yes

# 设置静态ip地址（推荐）

[Network]
Address=192.168.1.23/24
Gateway=192.168.1.1
DNS=192.168.1.1 8.8.8.8 114.114.114.114

systemctl enable systemd-networkd.service
systemctl enable systemd-resolved.service
</code></pre>
<p>iwd dhcp 功能</p>
<pre><code class="language-bash"># vim /etc/iwd/main.conf
[General]
EnableNetworkConfiguration=true
[Network]
NameResolvingService=systemd
</code></pre>
<p>添加用户</p>
<p><code>useradd --create-home neo</code></p>
<p>设置密码</p>
<p><code>passwd neo</code></p>
<p>设置用户组</p>
<p><code>usermod -aG wheel,users,storage,power,lp,adm,optical neo</code></p>
<p>无需密码</p>
<p><code>vim /etc/sudoers</code></p>
<p>ssh</p>
<pre><code class="language-bash">pacman -S openssh
systemctl enable sshd
</code></pre>
<p>重启</p>
<pre><code class="language-bash">exit
umount /mnt/boot
# umount /mnt/home
umount /mnt
reboot
</code></pre>
<h3 id="第三部分驱动安装"><a class="header" href="#第三部分驱动安装">第三部分：驱动安装</a></h3>
<p><a href="https://sw.kovidgoyal.net/kitty/conf/#conf-kitty-fonts">kitty fonts</a></p>
<p><a href="https://www.reddit.com/r/KittyTerminal/comments/r5hssh/kitty_nerd_fonts/">kitty set nerd fonts</a></p>
<p><a href="https://github.com/ryanoasis/nerd-fonts/wiki/Glyph-Sets-and-Code-Points">Glyph</a></p>
<p>In kitty you can config the symbol fonts by code point So need not install addition nerd fonts.</p>
<h3 id="git-fetch-submodules"><a class="header" href="#git-fetch-submodules">git fetch submodules</a></h3>
<p><code>git clone --recurse-submodules git@github.com:shun-sfoo/xmonad.git</code></p>
<h3 id="bug-fix"><a class="header" href="#bug-fix">Bug Fix</a></h3>
<p>if occurs <code>OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection github:443</code></p>
<p>may set git config proxy</p>
<pre><code class="language-bash"># 解决方法，为git设置代理
git config --global http.proxy=127.0.0.1:7890
git config --global https.proxy=127.0.0.1:7890
# 取消设置
git config --global --unset http.proxy
git config --global --unset https.proxy
# 查看所有git配置
git config --global -l
</code></pre>
<h3 id="necessary-tools"><a class="header" href="#necessary-tools">necessary tools</a></h3>
<p><code>sudo pacman -S --needed base-devel</code></p>
<pre><code class="language-bash">sudo pacman --need -S \
kitty jq yt-dlp gtk4 glade p7zip git clash htop btop`# favorite terminal` \
musl `# cros compile` \
lua-language-server typescript-language-server rust-analyzer `# lsp` \
prettier  `# formatter`  \
clang llvm lldb cmake meson ninja gdb valgrind `# c tools`  \
fcitx5 fcitx5-rime fcitx5-gtk rime-double-pinyin `# fcitx` \
exa bat starship zoxide mcfly ripgrep stylua rust-analyzer vivid mdbook `# rust cli`  \
zsh-autosuggestions zsh-syntax-highlighting `# zsh plugins` \
alsa-utils mpv ranger imagemagick cmus `# audio and video`  \
gmtp scrcpy `# android` \
net-tools bind tcpdump inetutils wget lsof`# net tools`
</code></pre>
<p>HDD</p>
<pre><code class="language-bash">sudo pacman -S exfatprogs ntfs-3g
</code></pre>
<h3 id="wayland"><a class="header" href="#wayland">wayland</a></h3>
<p>wayfire 为以前的记录</p>
<p><code>sudo dmesg |rg i915</code></p>
<p>if there has error <code>i915 [drm] ERROR</code> meanings intel drm failed.
it may appear in the machine which has tow graphics cards like <code>intel + nvidia</code></p>
<p>to resolve it by edit <code>/boot/loader/entries/arch.conf</code>
add the options <code>i915.modeset=0 nouveau.modeset=0</code></p>
<p><a href="https://wiki.archlinux.org/title/Systemd-boot#Configuration">Systemd-boot Configuration</a></p>
<p><a href="https://wiki.archlinux.org/title/kernel_mode_setting#Disabling_modesetting">Disabling_modesetting</a></p>
<pre><code class="language-bash">sudo pacman -S wayland polkit wlroots glm grim slurp
# Graphics driver
sudo pacman -S mesa vulkan-intel # intel
sudo pacman -S nvidia
paru wayfire
paru wlr-randr-git # output display info
# paru swaylock-effects-git
# pacman -S waybar
sudo pacman -S wofi swaybg wl-clipboard
# pacman -S swayidle
sudo pacman -S mako #notify
</code></pre>
<h3 id="nvidia-gbm"><a class="header" href="#nvidia-gbm">Nvidia GBM</a></h3>
<p>To use GBM as a wayland backend</p>
<p><a href="https://wiki.archlinux.org/title/wayland#Requirements">wayland</a></p>
<p><a href="https://wiki.archlinux.org/title/Environment_variables#Wayland_environment">Wayland_environment</a></p>
<pre><code class="language-bash">vim .pam_enviroment
# or should edit in  ~/.config/environment.d/envvars.conf
# TODO need to check
GBM_BACKEND=nvidia-drm
__GLX_VENDOR_LIBRARY_NAME=nvidia
</code></pre>
<h3 id="kms"><a class="header" href="#kms">KMS</a></h3>
<p>in order to enable <strong>Wayland</strong> in nvidia must enable nvidia kms</p>
<p><a href="https://wiki.archlinux.org/title/Kernel_mode_setting">KMS</a></p>
<p>edit <code>/boot/loader/entries/arch.conf</code></p>
<p>add options <code>nvidia-drm.modeset=1</code></p>
<h3 id="early-kms-start"><a class="header" href="#early-kms-start">Early KMS start</a></h3>
<p><a href="https://wiki.archlinux.org/title/kernel_mode_setting#Early_KMS_start">Early_KMS_start</a></p>
<p><a href="https://wiki.archlinux.org/title/NVIDIA#DRM_kernel_mode_setting">nvidia-drm</a></p>
<pre><code class="language-bash">sudo vim /etc/mkinitcpio.conf
MODULES=(i915? nvidia nvidia_modeset nvidia_uvm nvidia_drm)
sudo mkinitcpio -p linux
</code></pre>
<p>pacman hook</p>
<pre><code class="language-bash">/etc/pacman.d/hooks/nvidia.hook

[Trigger]
Operation=Install
Operation=Upgrade
Operation=Remove
Type=Package
Target=nvidia
Target=linux
# Change the linux part above and in the Exec line if a different kernel is used

[Action]
Description=Update Nvidia module in initcpio
Depends=mkinitcpio
When=PostTransaction
NeedsTargets
Exec=/bin/sh -c 'while read -r trg; do case $trg in linux) exit 0; esac; done; /usr/bin/mkinitcpio -P'
</code></pre>
<h3 id="docker"><a class="header" href="#docker">Docker</a></h3>
<p>consider use podman</p>
<pre><code class="language-bash">sudo pacman -S docker docker-compose
sudo systemctl enable docker
sudo systemctl start docker
sudo groupadd docker
sudo usermod -aG docker $USER
newgrp docker
</code></pre>
<h3 id="zathura"><a class="header" href="#zathura">Zathura</a></h3>
<p><code>sudo pacman -S zathura-pdf-mupdf</code></p>
<p>usage</p>
<ul>
<li>
<p><input disabled="" type="checkbox" checked=""/>
<code>a</code> page-fit</p>
</li>
<li>
<p><input disabled="" type="checkbox" checked=""/>
<code>s</code> width-fit</p>
</li>
<li>
<p><input disabled="" type="checkbox" checked=""/>
<code>C-r</code> invert color</p>
</li>
</ul>
<h3 id="firefox"><a class="header" href="#firefox">Firefox</a></h3>
<pre><code class="language-bash">vim .pam_enviroment
MOZ_ENABLE_WAYLAND=1
</code></pre>
<h3 id="electron"><a class="header" href="#electron">Electron</a></h3>
<pre><code class="language-bash">vim  ~/.config/electron-flags.conf
--enable-features=UseOzonePlatform
--ozone-platform=wayland
</code></pre>
<h3 id="renderer"><a class="header" href="#renderer">Renderer</a></h3>
<pre><code class="language-bash">vim .pam_enviroment
## in the future may use vulkan
WLR_RENDERER=gles2
</code></pre>
<h3 id="keychron-keyboard"><a class="header" href="#keychron-keyboard">keychron keyboard</a></h3>
<p><a href="https://wiki.archlinux.org/title/Apple_Keyboard">apple keyboard</a></p>
<pre><code class="language-bash">sudo vim /etc/modprobe.d/hid_apple.conf

options hid_apple fnmode=2
</code></pre>
<p><code>sudo mkinitcpio -P</code></p>
<h3 id="vnc"><a class="header" href="#vnc">Vnc</a></h3>
<p><code>sudo pacman -S libvncserver remmina</code></p>
<h3 id="lambda"><a class="header" href="#lambda">lambda</a></h3>
<pre><code class="language-bash"># prefer to install racket , racket-minimal need a lot of packages
# alternate choice is chicken, but it's  sicp eggs not use in current version
sudo pacman -S fennel fnlfmt racket
</code></pre>
<pre><code class="language-bash"># racket included xrepl
raco pkg install sicp
# fmt tools use by raco fmt -i &lt;file&gt;
raco pkg install fmt
</code></pre>
<p><a href="https://marvinsblog.net/post/2021-03-10-racket-xrepl/">xrepl</a></p>
<p><a href="https://docs.racket-lang.org/guide/Vim.html">vim in racket</a></p>
<p>I have to use <code>set filetype=racket</code> in the racket file.</p>
<p><code>vim :h lisp lispword</code></p>
<p>And could find the lisp config in <a href="https://github.com/wlangstroth/vim-racket">vim-racket</a> plugin</p>
<p>like <code>rg lisp</code> in the plugins dir</p>
<p>In my neovim setting I solved the <strong>colorscheme</strong> and <strong>indent</strong> by simply setting.</p>
<h3 id="chrome"><a class="header" href="#chrome">Chrome</a></h3>
<p><code>paru google-chrome-stable</code></p>
<p>configuration <code>chrome-flags.conf</code> enable wayland</p>
<h3 id="obsidian"><a class="header" href="#obsidian">Obsidian</a></h3>
<p><code>sudo pacman -S obsidian</code></p>
<p><a href="ttps://wiki.archlinux.org/title/Wayland#Per_user">ArchWiki:Electron Per User</a></p>
<p>if wayland is not work, consider link the obsidian <code>electron&lt;version&gt;-flags.conf</code></p>
<p><code>ln -s ~/.config/electron-flags.conf ~/.config/electron17-flags.conf</code></p>
<h3 id="gimp"><a class="header" href="#gimp">gimp</a></h3>
<p><strong>before build read INSTALL.in and meson.make</strong></p>
<p><code>sudo pacman -S mypaint-brushes1</code></p>
<p>mypaint-brushes use the 1 version not default(2)</p>
<p>gimp now use meson build
By default meson install in <code>/usr/local/bin</code> and the shared library is <code>/usr/local/lib</code>
and the enviroment path don't include. so if build by defalut it occur error.
There has two way to solved:</p>
<ol>
<li><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib</code> not recomment</li>
<li>set meson <code>prefix =/usr</code> . I choose the way.
In detail: edit the meson.make and comment the <code>prefix=$(home)/.local</code>, and
we only have the <code>prefix=/usr</code>, that's we want. <code>./meson.make</code> and cd _build
run <code>meson configure</code> and we see the directories section prefix is <code>/usr</code>.
Then install it.</li>
</ol>
<pre><code class="language-bash"># ERROR: if it error python module giscanner not found
# https://archlinux.org/packages/extra/x86_64/gobject-introspection/files/
# the python file in /usr/bin
# reboot could save the problem
# if not `export PATH="/usr/bin:$PATH"`
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../linux/haskell.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../neovim/intro.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../linux/haskell.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../neovim/intro.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
